WEBVTT

00:00.390 --> 00:02.690
OK, let's go ahead and take care of this icon.

00:02.700 --> 00:03.750
Favorite icon here.

00:04.440 --> 00:07.620
So we need to go back to our weather app because that's where everything is driven.

00:10.420 --> 00:13.040
And back to where we have his main screen.

00:13.060 --> 00:14.920
One of them, at least, where we are.

00:15.340 --> 00:17.680
I would have added this icon.

00:17.890 --> 00:23.210
So what we need to do right before that inside of this if statement, let's see.

00:23.230 --> 00:31.330
Right, right before we add the icon, I'm going to create a variable to check, to check our database,

00:31.330 --> 00:41.560
to see if the current CD that was shown here, the title is equal to these any to show if the city that

00:41.560 --> 00:43.030
we have showing here.

00:44.080 --> 00:50.950
Exists already in our database, so I'm going to put an if statement the actually I'm going to see Val

00:50.950 --> 00:51.400
first.

00:52.030 --> 00:57.130
This is already five list.

00:57.400 --> 00:59.560
Very cryptic, but bear with me here.

01:00.370 --> 01:00.790
So.

01:03.130 --> 01:05.050
I'm going to set that to our review model.

01:06.900 --> 01:08.980
Think is favourite view model?

01:09.000 --> 01:10.020
I called yes.

01:10.590 --> 01:21.720
And I'm going to get to the fave list state of flow and say, collect a state, get the value such and

01:21.720 --> 01:22.890
then I'm going to filter.

01:23.040 --> 01:25.110
This is the beauty of Flutter.

01:25.440 --> 01:30.240
This is the beauty of cuddling because I can't actually filter the list.

01:30.540 --> 01:31.920
In this case, I want to pass an item.

01:33.320 --> 01:35.570
Like this or we have available to work with?

01:35.750 --> 01:37.150
So what is it going to do here?

01:37.160 --> 01:40.530
Well, to filter, we need to pass some predicate.

01:40.910 --> 01:41.180
Right.

01:41.780 --> 01:45.920
So I'm going to put all of that inside of curly instead of parentheses.

01:46.340 --> 01:48.350
I'm going to say item, right?

01:48.590 --> 01:57.440
This item we can see it's a favor object, some checking if item that city is equal to title.

01:59.270 --> 02:07.100
I'm going to split again by comma and get the first item in our list.

02:07.850 --> 02:09.070
So we've done this before.

02:09.380 --> 02:15.770
All I'm doing is I'm looking for this area, this part of our title.

02:16.940 --> 02:24.860
So if Seattle was saying, OK, we're going to look as we look through in our collected as state favorite

02:24.870 --> 02:28.820
list from our field model, which gets all that from database.

02:29.450 --> 02:33.090
So we're getting all of the items from a database.

02:33.680 --> 02:36.710
All of the cities and we're checking to see if there is a match.

02:36.920 --> 02:37.760
That's all we're doing here.

02:38.150 --> 02:43.050
If there is a match, what happens with a filter is that it returns an array or lists.

02:43.050 --> 02:44.690
So this is actually going to be a list.

02:46.180 --> 02:46.450
Right.

02:48.230 --> 02:55.940
So what I'm going to do then wants to check if the list is empty, that means there's no match, which

02:55.940 --> 03:00.980
means this city here doesn't exist in our database, which means in this case, this is going to show

03:01.730 --> 03:07.250
if the list is not empty, that means there is a match, then that means we need to hide this.

03:08.240 --> 03:09.200
That's all we doing here.

03:09.620 --> 03:13.520
So now I can do, I can put in a brief statement.

03:15.050 --> 03:18.620
And I'm going to put all of that, all of this inside.

03:18.620 --> 03:20.330
Let's see, click there.

03:22.700 --> 03:23.030
Right.

03:23.210 --> 03:24.860
I'm going to cut all of this.

03:28.130 --> 03:35.630
And put it inside of that if statement, so if is already safe, listening can see, as I said, it

03:35.630 --> 03:38.120
comes in as a list whenever we use a predicate.

03:38.640 --> 03:38.900
Right?

03:39.320 --> 03:46.430
So yes, the confirmation there, if his list is null or empty.

03:47.990 --> 03:50.330
Then this favorite icon should show.

03:53.920 --> 03:59.290
Else it shouldn't show anything, I'm just going to say give me a box.

04:02.150 --> 04:02.690
Like this?

04:04.840 --> 04:05.440
And we're done.

04:07.060 --> 04:07.730
Let's see if this true.

04:07.750 --> 04:08.890
Let's go ahead and Brian real quick.

04:12.840 --> 04:17.430
So at this point, this I can shouldn't show because San Diego is part of the latest, I believe.

04:22.270 --> 04:28.060
And you can see there's no sign there's no icon for San Diego, because if you go to favorites, you'll

04:28.060 --> 04:29.320
see that San Diego as part of it.

04:29.330 --> 04:34.540
Now, if I delete San Diego, if I go back, you're going to see that indeed, we still we will have

04:34.540 --> 04:36.700
that icon which can save.

04:37.060 --> 04:42.940
And then once you save, that list went away because it knows right away that the San Diego was added

04:43.270 --> 04:50.560
and database know how to pass that into our immutable state flow on immutable flow and responds by hiding

04:50.560 --> 04:55.660
it right away and we go back to our favor is going to see San Diego.

04:56.860 --> 04:59.110
Let's go back, concedes San Diego.

04:59.110 --> 04:59.770
He's out of there.

05:01.570 --> 05:02.230
All right.

05:02.650 --> 05:04.270
Very good, very good.

05:08.450 --> 05:12.690
All right, so, Max, what you want to do, even though everything looks fine, we're going to stop

05:12.690 --> 05:20.700
here and life is great, but we need to give users a little bit of some sort of a visual clues as to

05:20.700 --> 05:21.640
what's happening.

05:21.660 --> 05:24.180
So when we click, let's add something new here.

05:24.840 --> 05:26.430
I see say there are.

05:29.330 --> 05:35.960
OK, Mozambique, if I save you, just goes away, which is OK, I guess it's fine, but it would be

05:35.960 --> 05:41.750
nice to have some sort of a toast message to show that, OK, that was added to our database, to our

05:41.750 --> 05:42.830
favorites, right?

05:43.430 --> 05:49.040
To do that, we're going to create a structure that will allow us to do so to show when something is

05:49.040 --> 05:52.790
saved, to show that something was saved so users know that something was saved.

05:53.660 --> 05:55.430
So we're going to use a toast message.

05:56.600 --> 06:02.120
So let me because I'm going to use that link, put a block into our Alice statement there.

06:03.080 --> 06:03.350
OK.

06:03.830 --> 06:04.900
So we'll see in a second.

06:04.910 --> 06:08.800
So what I'm going to do, I'm going to start from the back, right?

06:08.970 --> 06:14.510
Once they show toast like that and I'm going to pass it context.

06:15.620 --> 06:23.270
It's going to be equal to a context and context type and going to so also pass a show it which is going

06:23.270 --> 06:24.860
to be we'll see what that will be.

06:25.700 --> 06:27.440
OK, this is going to be context.

06:28.910 --> 06:29.660
We'll create that.

06:30.200 --> 06:30.530
All right.

06:30.560 --> 06:34.880
Let's go ahead and create this puppy crater composable.

06:35.840 --> 06:42.110
Now this show, it is going to be a mutable state, as you will see in a bit.

06:42.290 --> 06:47.660
It's going to be a Boolean, and context is going to be context.

06:47.660 --> 06:49.010
And what context like this?

06:56.150 --> 06:56.420
OK.

06:58.110 --> 06:58.470
All right.

06:58.710 --> 07:02.610
So, show show host, what is it?

07:03.390 --> 07:14.130
So I'm going to say, if show it, that value is true, then I'm going to say toast.

07:15.990 --> 07:18.930
That make texts set to host.

07:24.490 --> 07:32.380
Call it make text and pass in the context, and then I'm going to pass the message, which is just going

07:32.380 --> 07:32.800
to be.

07:35.300 --> 07:39.890
City added to favorites, something like that.

07:44.150 --> 07:46.550
Or should I say, add it to favorites like this?

07:53.070 --> 07:56.520
And that means a toast length.

07:56.550 --> 08:04.110
It's going to be short and make sure that we show that toast, OK now because it's all about states

08:04.110 --> 08:11.210
and all sort of things to show all their dialogue, to show toasts in in compose.

08:11.220 --> 08:15.420
If you are coming from under development, it's a little bit strange, but not too bad.

08:15.450 --> 08:20.940
So that's why we have to pass the at least a few other items here, such as these mutable state.

08:25.530 --> 08:30.000
So let's create this immutable state at the top here, because we're going to be using it.

08:31.470 --> 08:33.160
So we're going to create value.

08:33.540 --> 08:34.380
Show it.

08:35.220 --> 08:36.150
It's a mutable state.

08:36.150 --> 08:39.330
So I'm going to just say we can just go ahead and say bye.

08:39.870 --> 08:40.620
Remember?

08:43.040 --> 08:47.120
There's a preference, the same thing and same mutable.

08:49.690 --> 08:50.650
State of.

08:51.930 --> 08:53.700
Say false in the beginning.

08:54.780 --> 08:55.110
All right.

08:57.000 --> 09:02.940
And while we're here, we need to get the context, so to get a context, we say context.

09:03.930 --> 09:05.550
And I'm going to say local.

09:06.990 --> 09:09.990
Context, don't get current.

09:11.250 --> 09:11.640
All right.

09:11.730 --> 09:12.930
So we have that context.

09:14.770 --> 09:22.030
So what we want to happen is when we click just look here, when we click on this button or this icon,

09:22.030 --> 09:28.300
we want to run it or to set our show it to true.

09:28.660 --> 09:34.690
So that is shown right, the actual icon or in this case, the actual toast is shown.

09:35.180 --> 09:36.250
And where does that happen?

09:36.550 --> 09:41.260
Well, that has to be happening right after the item was inserted into our database.

09:41.860 --> 09:43.330
So let's go back down here.

09:44.290 --> 09:47.080
OK, I see what the problem is.

09:47.230 --> 09:55.870
OK, let's not use by think we just have to use the normal one as equal to remember like this.

09:57.890 --> 10:01.880
Which means I have to say that value is true.

10:02.690 --> 10:04.550
We'll just remove that altogether.

10:05.630 --> 10:06.620
And we should be good.

10:06.830 --> 10:07.200
All right.

10:07.250 --> 10:09.650
Just two little issues there, but it's fine.

10:10.130 --> 10:18.440
OK, so that means then I need to set that whenever these favorite runs or whenever that is done with.

10:19.010 --> 10:20.900
And we have say something to our database.

10:21.510 --> 10:31.860
OK, so I'm going to say dot and invoke the run block here and then say, show it at a value said that

10:31.860 --> 10:32.420
to true.

10:32.570 --> 10:35.570
So we want that to happen right after this.

10:36.140 --> 10:38.980
Favorite is right after our insert.

10:38.990 --> 10:39.920
Favorite is done.

10:40.820 --> 10:47.900
And we want this, of course, to be back to false inside in the statement.

10:47.900 --> 10:51.950
So show it, that value now is going to be false.

10:52.160 --> 10:52.550
Here.

10:54.740 --> 10:55.170
Makes sense.

10:59.130 --> 11:01.350
OK, let's go ahead and see this right.

11:05.230 --> 11:05.500
OK.

11:05.560 --> 11:10.360
Of course, Sandiego Diego is not going to show the icon, let's find something else.

11:17.140 --> 11:22.540
OK, Las Vegas clicked and added to favorites is showing and should go away for soon.

11:23.200 --> 11:26.800
If I go to our favorites, you should see Las Vegas.

11:27.280 --> 11:28.630
Click There is Las Vegas.

11:28.960 --> 11:29.500
There you go.

11:30.100 --> 11:32.220
OK, so it is indeed working.

11:32.230 --> 11:35.320
Let's do Mumbai.

11:37.900 --> 11:38.860
OK, let's save.

11:39.250 --> 11:41.590
And voila, I had a two favorites for good.

11:42.430 --> 11:46.360
And if we go to favorites, you can see that Mumbai is indeed added.

11:47.570 --> 11:47.950
All right.

11:48.670 --> 11:55.690
It's indeed working so small things, but nonetheless, it just gives the user something to to help

11:55.690 --> 11:59.110
them understand, OK, what's going on in terms of user experience?

11:59.410 --> 12:01.090
So I should always think in those terms as well.
