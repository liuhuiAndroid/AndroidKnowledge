### 国密

国家商用密码，简称商密，拼音缩写时SM。

为什么要使用国密？发展自己的加密算法，比使用美国公布的加密算法安全，防止数学后门；摆脱国外技术控制的必然举措；提升标准国际话语权必要举措。

SM1 和 SM4 是对称算法，对标 AES；

SM2 是非对称算法，对标 RSA、ECDSA；

SM3 是摘要算法，对标 MD5；

国密SDK：郑州信大捷安信息技术股份有限公司 www.xdja.com

### No.8 密钥交换和数字信任链

##### 密钥交换和数字信任链

Key Exchange & Chain of Trust

##### Diffie-Hellman 密钥交换

DH算法是一种匿名密钥协商方案

##### ECDH 密钥交换

椭圆曲线密钥交换协议

##### 从java.crypto学习 DH

##### 数字信任-公钥基础设施

公钥分发方案：

1. 公开发布，有公开服务商

2. 公钥授权，需要组织登记查询；公钥授权中心

3. 公钥证书：使用证书来交换公钥，而不是管理员

   证书包含公钥，所有者标志，可信第三方签名

公钥基础设施 PKI

X.509 证书

##### 实战应用-操作系统的信任链

##### 实战应用-Openssl应用讲解

pem 格式证书转换成 der 格式证书

```shell
openssl x509 -in ca.pem -inform pem -out ca.der -outform der
```

导入CA到cacerts

指定新的 trustStore

##### 实战应用-java中的信任链

```shell
# 生成密钥
openssl genrsa -out domain.key 2048
# 生成CSR文件，可以交给签名机构签名证书
openssl req -new -key domain.key -out domain.csr
# 开始自签名创建CA
# 生成CA私钥
openssl genrsa -out ca.key 2048
# 生成自签名证书
openssl req -new -x509 -sha256 -days 30 -key ca.key -out ca.crt
# 签署证书
openssl x509 -req -CA ca.crt -CAKey ca.key -in domain.csr -out domain.crt -days 30 -CAcreateserial
```

##### 密钥交换和数字信任链

### No.10 协议分析

##### 学习 HTTPS 协议

HTTPS 协议 超文本传输安全协议

HTTPS = HTTP + SSL/TLS

##### 实战分析 HTTPS TLS 协议

WIRESHARK 网络协议分析器

```shell
curl -v --tlsv1.2 --http1.1 https://110.alipay.com
```

##### 学习 SSH 协议

##### 实战分析 SSH 协议

##### 安全通信的设计要素

1. 目标身份：通信双方确认身份
2. 协商密钥
3. 对称加密
4. 消息完整性

### No.11

